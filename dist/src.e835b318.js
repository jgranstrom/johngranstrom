(function(){function E(e,r,t,a){var $=t[0],l=t[1],v=a[0],i=a[1];if(e.clearRect(0,0,e.canvas.width,e.canvas.height),r){e.strokeStyle="#242424",e.lineWidth=1.5,e.beginPath();for(var o=0;o<$;o++)for(var n=0;n<l;n++){var x=H(r,$,o,n),c=o*v,h=n*i;x&F||(e.moveTo(c+v,h),e.lineTo(c+v,h+i)),x&G||(e.moveTo(c,h+i),e.lineTo(c+v,h+i))}e.stroke()}}function s(e,r,t){var a=t[0],$=t[1];if(e.clearRect(0,0,e.canvas.width,e.canvas.height),r&&0!==r.length){var l=a-4,v=$-4;e.fillStyle="rgb(10, 20, 30)";var i=r[0],o=i[0],n=i[1];e.fillRect(o*a+2,n*$+2,l,v);for(var x=1;x<r.length;x++){var c=x/(r.length-1);e.fillStyle="rgb("+(3+10*c<<0)+", "+(20+37*c<<0)+", "+(30+46*c<<0)+")";var h=r[x],P=h[0],f=h[1],W=P*a+2,p=f*$+2;o===P?n<f?e.fillRect(W,p-5,l,v+5):e.fillRect(W,p,l,v+5):o<P?e.fillRect(W-5,p,l+5,v):e.fillRect(W,p,l+5,v),o=P,n=f}}}var g={},F=1;g.EAST=F;var G=2;function H($,e,t,r){var p=r*e+t,u=6-p%4*2,o=3<<u;return($[p>>2]&o)>>>u}function R($,e,t,r,p){var u=r*e+t,o=u>>2,x=p<<6-u%4*2;$[o]=$[o]|x}g.SOUTH=G,g.getCell=H,g.patchCell=R;var S,I,w,J,y,K=10,L=document.getElementById("seed"),M=[].slice.call(document.getElementsByTagName("canvas")),j=M.map(function(a){return a.getContext("2d")}),z=j[0],q=j[2],b=[0,0],d=[0,0],N=[-1,-1],k=[0,0],T=!1;function A(){M.forEach(function(a){a.width=window.innerWidth,a.height=window.innerHeight})}function B(){d=[window.innerWidth/b[0],window.innerHeight/b[1]]}function C(a,$){return[a/d[0]>>>0,$/d[1]>>>0]}function D(a,$){var e=C(a,$);e[0]===N[0]&&e[1]===N[1]||(N=e,m({type:"Trace",mazeId:w,cell:e}))}function U(a,$){if(!T){var e=C(a,$);e[0]===k[0]&&e[1]===k[1]||(k=e,m({type:"UpdatePaths",source:e,mazeId:w}))}}function V(a,$,e){a.stopPropagation(),w=null;var r=C($,e);m({type:"Init",source:k,trace:r,dim:b})}function O(a,$,e){a.canvas.classList.remove("active");var r=a===$?e:$;return r.canvas.classList.add("active"),r}function X(a){"MazeBuffer"===a.type?(z=O(z,j[0],j[1]),q=O(q,j[2],j[3]),J=a.buffer,w=a.mazeId,y=[],b=a.dim,B(),E(z,J,b,d),s(q,y,d)):"Path"===a.type&&a.mazeId===w&&(y=a.path,s(q,y,d))}function Q(){return[window.innerWidth/K>>>0,window.innerHeight/K>>>0]}function Y(a){clearTimeout(S),S=setTimeout(function(){k=[0,0],A(),B(),m({type:"Init",source:k,dim:a,trace:[a[0]/2<<0,a[1]/2<<0]})},300)}function Z(){A(),B();var a=Q();a[0]!==b[0]||a[1]!==b[1]?Y(a):(E(z,J,b,d),s(q,y,d))}function _(a){a.preventDefault(),D(a.touches[0].clientX,a.touches[0].clientY)}function aa(a){T=!0,D(a.touches[0].clientX,a.touches[0].clientY)}function ba(){I=new Worker("dist/worker.ff30e05f.js"),document.addEventListener("mousemove",function(a){return D(a.clientX,a.clientY)}),document.addEventListener("click",function(a){return U(a.clientX,a.clientY)}),document.addEventListener("touchmove",_,{passive:!1}),document.addEventListener("touchstart",aa),L.addEventListener("touchstart",function(a){return a.stopPropagation()}),L.addEventListener("click",function(a){return V(a,a.clientX,a.clientY)}),window.addEventListener("resize",function(){return Z()}),I.onmessage=function(a){return X(a.data)},A();var a=Q();b=a,m({type:"Init",source:k,dim:a,trace:[a[0]/2<<0,a[1]/2<<0]})}function m(a){I.postMessage(a)}"function"==typeof Worker&&"function"==typeof Uint8Array&&ba();g.__esModule=true;return{"QCba":{},"DuBJ":g};})()