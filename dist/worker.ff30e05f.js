(function(){var g={},q=1;g.EAST=q;var l=2;function s($,e,t,r){var p=r*e+t,u=6-p%4*2,o=3<<u;return($[p>>2]&o)>>>u}function w($,e,t,r,p){var u=r*e+t,o=u>>2,x=p<<6-u%4*2;$[o]=$[o]|x}g.SOUTH=l,g.getCell=s,g.patchCell=w;var j,b,c,k,z=-1>>>0,A=1,B=2,C=3,D=4;function G(){var $=k[0],a=k[1];j=Math.random().toString(16),b=new Uint8Array(Math.ceil($*a*2/8));for(var Z=1,r=new Uint32Array($),e=0;e<a;e++){for(var t=e===a-1,v=0;v<$;v++)if(r[v]||(r[v]=Z++),v>0){var X=r[v],n=r[v-1];if(X!==n&&(t||Math.random()>.5)){for(var m=0;m<$;m++)r[m]===X&&(r[m]=n);w(b,$,v-1,e,q)}}if(!t){var i=new Uint32Array($),f=new Set;for(v=0;v<$;v++)Math.random()>.5&&(i[v]=r[v],w(b,$,v,e,l),f.add(r[v]));for(v=0;v<$;v++)f.has(r[v])||(i[v]=r[v],w(b,$,v,e,l),f.add(r[v]));r=i}}}function E($){var a=$[0],Z=$[1],r=k[0],e=k[1];(c=new Uint32Array(r*e))[Z*r+a]=z;for(var t=[[Z*r+a,a,Z,0]];t.length>0;){var v,X,n,m=t.pop(),i=m[0],f=m[1],h=m[2],o=m[3],d=s(b,r,f,h);if(h>0&&s(b,r,f,h-1)&l&&o!==A)c[n=(v=h-1)*r+f]=i,t.push([n,f,v,C]);if(d&q&&o!==B)c[n=h*r+(X=f+1)]=i,t.push([n,X,h,D]);if(d&l&&o!==C)c[n=(v=h+1)*r+f]=i,t.push([n,f,v,A]);if(f>0&&s(b,r,f-1,h)&q&&o!==D)c[n=h*r+(X=f-1)]=i,t.push([n,X,h,B])}}function F($){for(var a=$[0],Z=$[1],r=k[0],e=[[a,Z]],t=c[Z*r+a];null!=t&&t!==z;){var v=t%r,X=t/r>>>0;e.unshift([v,X]),t=c[t]}return e}function H($){k=$.dim,G(),E($.source),y({type:"MazeBuffer",buffer:b,mazeId:j,dim:k}),y({type:"Path",mazeId:j,path:F($.trace)})}function I($){null!=b&&$.mazeId===j&&(E($.source),y({type:"Path",path:[],mazeId:j}))}function J($){null!=c&&$.mazeId===j&&y({type:"Path",mazeId:j,path:F($.cell)})}function K($){switch($.type){case"Init":return H($);case"UpdatePaths":return I($);case"Trace":return J($)}}function y($){self.postMessage($)}self.onmessage=function($){return K($.data)};g.__esModule=true;return{"ZXZ8":{},"DuBJ":g};})()